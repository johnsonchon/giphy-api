<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" />
    <title>Giphy API</title>
</head>

<body>
    <div class="container">
        <!-- Buttons -->
        <div class="row">
            <div class="col-md-12 padding-top-md button-area">
                <button type="button" class="btn btn-warning" data-city="Los Angeles">Los Angeles</button>
                <button type="button" class="btn btn-warning" data-city="New York">New York</button>
                <button type="button" class="btn btn-warning" data-city="Las Vegas">Las Vegas</button>
                <button type="button" class="btn btn-warning" data-city="Chicago">Chicago</button>
                <button type="button" class="btn btn-warning" data-city="Seattle">Seattle</button>
                <button type="button" class="btn btn-warning" data-city="Moscow">Moscow</button>
                <button type="button" class="btn btn-warning" data-city="Seoul">Seoul</button>
                <button type="button" class="btn btn-warning" data-city="London">London</button>
                <button type="button" class="btn btn-warning" data-city="Paris">Paris</button>
                <button type="button" class="btn btn-warning" data-city="Tokyo">Tokyo</button>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="input-group mb-3">
                    <input type="text" class="form-control" placeholder="Enter a City" aria-label="Recipient's username"
                        aria-describedby="basic-addon2">
                    <div class="input-group-append">
                        <button class="btn btn-secondary" type="button">Add the button!</button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="container">

        <!-- giphy body -->
        <div class="row">

            <!-- gifs -->
            <div class="col-md-12 gif-body">
            </div>

        </div>
    </div>

    <!-- CSS Styling -->

    <style>
        .container {
            background-color: #eaeaea;
            margin-top: 30px;
        }

        .btn-warning {
            width: 154px;
            margin-top: 20px;

        }

        .input-group {
            margin-top: 20px;
        }
    
    
    </style>

    <!-- Javascript -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript">

        $(".btn-warning").on("click", function () {
            var city = $(this).attr("data-city");

            // For some reason my API wont work so I used one from the assigments
            var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + city + "&api_key=dc6zaTOxFJmzC&limit=10";

            $.ajax({
                url: queryURL,
                method: "GET"
            })

                .then(function (response) {
                    var results = response.data;

                    // Why do we have to create a for loop?
                    for (var i = 0; i < results.length; i++) {
                        var gifDiv = $("<div>");
                        var rating = results[i].rating;
                        var p = $("<p>").text("Rating: " + rating);
                        var cityImage = $("<img>");

                        cityImage.attr("src", results[i].images.fixed_height.url);
                        gifDiv.append(p);
                        gifDiv.append(cityImage);

                        $(".gif-body").prepend(gifDiv);

                        // Change state of gif
                        cityImage.on("click", function () {

                            cityImage.attr({
                                "src": responseElem.images.original_still.url,
                                "data-still": responseElem.images.original_still.url,
                                "data-animate": responseElem.images.original.url,
                                "data-state": "still",
                                "class": "gif"
                            });
                            
                            var state = $(this).attr("data-state");

                            if (state === "still") {
                                $(this).attr("src", $(this).attr("data-animate"));
                                $(this).attr("data-state", "animate");
                            } else {
                                $(this).attr("src", $(this).attr("data-still"));
                                $(this).attr("data-state", "still");
                            }


                        });

                    }



                });

        });


    </script>

</body>

</html>